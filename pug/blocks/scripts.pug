// Пример скриптов для бэка
script.
    document.addEventListener('DOMContentLoaded', () => {

        // Кнопка +
        document.body.addEventListener('click',(e)=>{
            if (e.target.classList.contains('js-basket-plus') || e.target.closest('.js-basket-plus')){
                e.preventDefault();
                const btn = e.target.classList.contains('js-basket-plus') ? e.target : e.target.closest('.js-basket-plus');
                const productId = btn?.getAttribute('data-product-id');
                const parents = document.querySelectorAll('.catalog-list__basket[data-product-id="'+productId+'"]');
                parents.forEach((parent)=>{
                    parent.classList.add('active');
                    const counter = parent.querySelector('[data-count]');
                    if (counter !== null && counter !== undefined) {
                        let count = Number(counter.getAttribute('data-count'));
                        const step = Number(counter.getAttribute('data-step'));
                        const max = Number(counter.getAttribute('data-max'));

                        count += step;

                        const btnPlus = parent.querySelector('.catalog-counter .js-basket-plus');

                        if (count + step <= max) {
                            btnPlus?.removeAttribute('disabled');
                        } else {
                            btnPlus?.setAttribute('disabled', 'disabled');
                        }

                        if (count > max){
                            count = max;
                        }

                        const btnMinus = parent.querySelector('.catalog-counter .js-basket-minus');
                        btnMinus?.removeAttribute('disabled');

                        counter.setAttribute('data-count', String(count));
                    }
                })
            }
        });

        // Кнопка -
        document.body.addEventListener('click', (e) => {
            if (e.target.classList.contains('js-basket-minus') || e.target.closest('.js-basket-minus')) {
                e.preventDefault();
                const btn = e.target.classList.contains('js-basket-minus') ? e.target : e.target.closest('.js-basket-minus');
                const productId = btn?.getAttribute('data-product-id');
                const parents = document.querySelectorAll('.catalog-list__basket[data-product-id="'+productId+'"]');
                parents.forEach((parent)=>{
                    const counter = parent.querySelector('[data-count]');
                    if (counter !== null && counter !== undefined) {
                        let count = Number(counter.getAttribute('data-count'));
                        const step = Number(counter.getAttribute('data-step'));

                        count -= step;

                        const btnMinus = parent.querySelector('.catalog-counter .js-basket-minus');

                        if (count <= 0) {
                            btnMinus?.setAttribute('disabled', 'disabled');

                            count = 0;

                            parents.forEach((parent)=>{
                                parent.classList.remove('active');
                            });
                        }

                        const btnPlus = parent.querySelector('.catalog-counter .js-basket-plus');
                        btnPlus?.removeAttribute('disabled');

                        counter.setAttribute('data-count', String(count));
                    }
                })
            }
        });

    });
